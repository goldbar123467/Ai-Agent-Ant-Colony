{"id": "mem_001_pattern_react_auth", "category": "pattern", "content": "React Authentication Pattern: When implementing auth in React/TypeScript, use a custom useAuth hook that wraps Context. Store JWT in httpOnly cookies (not localStorage) for security. Create an AuthProvider component at app root. Pattern: 1) AuthContext with user state + login/logout methods, 2) useAuth hook for consuming context, 3) ProtectedRoute wrapper component checking auth state, 4) API interceptor for attaching tokens. This pattern was used successfully in 12 tasks with average confidence 0.91.", "tags": ["web", "react", "authentication", "pattern", "typescript"], "project": "/app", "source": "scribe", "quality_score": 0.89, "tier": "active", "created_at": "2026-01-03T14:23:45Z", "usefulness_score": 0.92, "retrieval_count": 34}
{"id": "mem_002_bug_tailwind_purge", "category": "bug_fix", "content": "Tailwind CSS Classes Not Appearing in Production: Root cause was Tailwind's purge configuration not including dynamically constructed class names. Workers were using template literals like `bg-${color}-500` which get purged. Fix: Always use complete class names in code, or add dynamic classes to safelist in tailwind.config.js. Worker-3 reported this friction 3 times before pattern was identified. Added to cannot_do: 'Use dynamic class name construction with template literals'.", "tags": ["web", "tailwind", "css", "bug_fix", "production"], "project": "/app", "source": "scribe", "quality_score": 0.87, "tier": "active", "created_at": "2026-01-02T09:15:22Z", "usefulness_score": 0.95, "retrieval_count": 28}
{"id": "mem_003_decision_model_routing", "category": "decision", "content": "Queen Decision: LLM Model Routing by Task Complexity. After analyzing 50+ task outcomes, established routing policy: Simple tasks (validation, formatting, extraction) → DeepSeek for cost efficiency. Complex tasks (architecture decisions, multi-step reasoning) → Claude/GPT-4 for quality. Threshold: If task requires >3 reasoning steps or cross-domain knowledge, escalate to premium model. This reduced API costs 34% while maintaining quality scores >0.85.", "tags": ["decision", "llm", "routing", "optimization", "queen"], "project": "/app", "source": "queen", "quality_score": 0.94, "tier": "active", "created_at": "2026-01-01T16:42:18Z", "usefulness_score": 0.88, "retrieval_count": 15}
{"id": "mem_004_pattern_api_error", "category": "pattern", "content": "API Error Handling Pattern for FastAPI: Standardized error response format across all endpoints. Pattern: 1) Create custom exception classes inheriting from HTTPException, 2) Register exception handlers in main.py, 3) Return consistent JSON: {\"error\": {\"code\": \"ERROR_CODE\", \"message\": \"Human readable\", \"details\": {}}}. 4) Log all errors with request_id for tracing. 5) Use Pydantic models for error responses. Workers 8-14 adopted this pattern with 0.93 average confidence.", "tags": ["ai", "python", "fastapi", "api", "error_handling", "pattern"], "project": "/app", "source": "scribe", "quality_score": 0.91, "tier": "active", "created_at": "2026-01-03T11:08:33Z", "usefulness_score": 0.89, "retrieval_count": 22}
{"id": "mem_005_outcome_dashboard_task", "category": "outcome", "content": "Task Outcome: 'Build analytics dashboard with real-time charts'. Domain: web. Workers 1-7 executed in parallel. Total duration: 45.2s. Quality score: 0.87. Deliverables: 7 TypeScript files (Dashboard.tsx, ChartContainer.tsx, MetricCard.tsx, useAnalytics.ts, types.ts, styles.ts, index.ts). Minor conflict resolved: Worker-3 and Worker-5 both created chart wrapper - merged by Warden with Worker-5's version (more complete). No constraint violations. 2 friction reports (SCOPE_TOO_BIG from Worker-1).", "tags": ["web", "dashboard", "outcome", "react", "typescript"], "project": "/app", "source": "scribe", "quality_score": 0.82, "tier": "active", "created_at": "2026-01-04T08:34:12Z", "usefulness_score": 0.75, "retrieval_count": 8}
{"id": "mem_006_insight_parallel_limits", "category": "insight", "content": "Insight: Optimal Parallelism for Code Generation Tasks. After 100+ tasks, observed that 7 parallel workers is optimal for most codegen tasks. Beyond 7: diminishing returns due to merge conflicts. Below 7: underutilization. However, for tightly-coupled features (e.g., form + validation + API call), reducing to 3-4 workers with larger slices produces better coherence. Recommendation: Orchestrator should assess coupling before slicing.", "tags": ["insight", "parallelism", "optimization", "orchestrator"], "project": "/app", "source": "scribe", "quality_score": 0.86, "tier": "active", "created_at": "2026-01-02T20:15:44Z", "usefulness_score": 0.91, "retrieval_count": 19}
{"id": "mem_007_bug_async_context", "category": "bug_fix", "content": "AsyncIO Context Loss in Worker Agents: Workers using async LLM calls were losing request context when handling multiple concurrent slices. Root cause: shared httpx client without proper context isolation. Fix: Create new AsyncClient per request OR use contextvars to maintain request-scoped state. Added connection pooling with limits.max_connections=10, limits.max_keepalive_connections=5. Worker-11 discovered this after 3 failed tasks.", "tags": ["ai", "python", "async", "bug_fix", "httpx"], "project": "/app", "source": "scribe", "quality_score": 0.88, "tier": "active", "created_at": "2026-01-01T22:45:09Z", "usefulness_score": 0.93, "retrieval_count": 31}
{"id": "mem_008_pattern_websocket_quant", "category": "pattern", "content": "WebSocket Data Feed Pattern for Quant Domain: Robust connection handling for real-time market data. Pattern: 1) Reconnection with exponential backoff (max 30s), 2) Heartbeat every 15s to detect stale connections, 3) Message queue buffer for processing spikes, 4) Separate parsing thread to not block event loop, 5) Circuit breaker after 5 consecutive failures. Workers 15-21 use this pattern. Critical: Never block event loop with synchronous operations.", "tags": ["quant", "websocket", "pattern", "real_time", "trading"], "project": "/app", "source": "scribe", "quality_score": 0.92, "tier": "active", "created_at": "2026-01-03T15:22:17Z", "usefulness_score": 0.87, "retrieval_count": 16}
{"id": "mem_009_decision_constraint_relax", "category": "decision", "content": "Orchestrator Decision: Relaxed 'cannot fetch data directly' constraint for Web Workers. After 25 friction reports citing RULE_TOO_STRICT, analyzed patterns: Workers needed to call internal APIs during development. Adjustment: Changed to 'Cannot fetch from external/third-party APIs directly'. Internal project APIs now allowed. Queen approved 2026-01-02. Result: Friction reports for this rule dropped 89%.", "tags": ["decision", "constraint", "web", "rule_evolution"], "project": "/app", "source": "orch-web", "quality_score": 0.85, "tier": "active", "created_at": "2026-01-02T14:33:28Z", "usefulness_score": 0.82, "retrieval_count": 11}
{"id": "mem_010_pattern_pydantic_ai", "category": "pattern", "content": "Pydantic Model Pattern for LLM Structured Output: When requesting JSON from LLMs, always provide Pydantic model as schema. Pattern: 1) Define response model with Field descriptions, 2) Include model.model_json_schema() in prompt, 3) Parse response with model.model_validate_json(), 4) Catch ValidationError and retry with error details in prompt, 5) Max 2 retries before falling back to unstructured. Workers 8-14 achieve 94% first-try parse success with this pattern.", "tags": ["ai", "pydantic", "llm", "pattern", "structured_output"], "project": "/app", "source": "scribe", "quality_score": 0.93, "tier": "active", "created_at": "2026-01-04T10:18:55Z", "usefulness_score": 0.96, "retrieval_count": 45}
{"id": "mem_011_bug_revocation_race", "category": "bug_fix", "content": "Race Condition in Agent Revocation: When revoking agent, there was a window where agent could still process queued messages. Root cause: Revocation check happened at message receive, not message send. Fix: 1) Check is_alive() before processing each message, 2) Add revoked_at timestamp to registry, 3) Reject messages sent after revocation timestamp, 4) Broadcast AGENT_REVOKED signal immediately. Warden-AI discovered when Worker-12 processed 3 messages post-revocation.", "tags": ["bug_fix", "revocation", "race_condition", "warden"], "project": "/app", "source": "warden-ai", "quality_score": 0.90, "tier": "active", "created_at": "2026-01-03T09:45:33Z", "usefulness_score": 0.88, "retrieval_count": 14}
{"id": "mem_012_outcome_ml_pipeline", "category": "outcome", "content": "Task Outcome: 'Create ML data pipeline with embeddings'. Domain: ai. Workers 8-14 executed. Total duration: 62.8s. Quality score: 0.91. Deliverables: DataLoader class, EmbeddingGenerator, VectorStore wrapper, Pipeline orchestrator, API routes, Pydantic schemas, Unit tests. Zero conflicts. 1 friction report (MISSING_CONTEXT - Worker-10 needed embedding dimension info). High confidence across all workers (avg 0.89). Pattern extracted: embedding pipeline structure.", "tags": ["ai", "ml", "pipeline", "embeddings", "outcome"], "project": "/app", "source": "scribe", "quality_score": 0.86, "tier": "active", "created_at": "2026-01-04T14:22:41Z", "usefulness_score": 0.79, "retrieval_count": 7}
{"id": "mem_013_insight_feedback_quality", "category": "insight", "content": "Insight: Worker Feedback Correlates with Output Quality. Analysis of 500+ worker outputs shows: Workers reporting high confidence (>0.85) AND high task_fit (>0.8) produce outputs with 92% QA pass rate. Workers with low clarity scores (<0.6) have 3x higher revision rate. Recommendation: When clarity < 0.6, Orchestrator should provide additional context before worker execution, not after.", "tags": ["insight", "feedback", "quality", "metrics"], "project": "/app", "source": "qa-reporter", "quality_score": 0.91, "tier": "active", "created_at": "2026-01-03T18:05:22Z", "usefulness_score": 0.94, "retrieval_count": 23}
{"id": "mem_014_pattern_shadcn_forms", "category": "pattern", "content": "Form Pattern with shadcn/ui and React Hook Form: Standardized form implementation. Pattern: 1) Use FormProvider from react-hook-form, 2) Create FormField wrapper connecting shadcn Input to RHF, 3) Zod schema for validation, 4) zodResolver in useForm, 5) Reusable FormInput, FormSelect, FormCheckbox components. Structure: form/schema.ts (Zod), form/fields.tsx (reusable), form/MyForm.tsx (implementation). Worker-4 specializes in this pattern.", "tags": ["web", "react", "forms", "shadcn", "pattern", "validation"], "project": "/app", "source": "scribe", "quality_score": 0.90, "tier": "active", "created_at": "2026-01-02T11:33:18Z", "usefulness_score": 0.91, "retrieval_count": 38}
{"id": "mem_015_decision_quant_safety", "category": "decision", "content": "Queen Decision: Enhanced Safety Constraints for Quant Domain. After risk assessment, added to quant workers cannot_do: 1) 'Execute any trade without explicit dry_run=True', 2) 'Modify position sizing without risk check', 3) 'Bypass circuit breakers', 4) 'Access production API keys in development'. Rationale: Financial operations require extra safety. Violation of quant safety rules = immediate escalation to human, not just revocation.", "tags": ["decision", "quant", "safety", "constraint", "queen"], "project": "/app", "source": "queen", "quality_score": 0.95, "tier": "active", "created_at": "2026-01-01T10:15:44Z", "usefulness_score": 0.97, "retrieval_count": 52}
{"id": "mem_016_code_snippet_retry", "category": "code_snippet", "content": "Retry Decorator with Exponential Backoff:\n```python\nimport asyncio\nfrom functools import wraps\n\ndef async_retry(max_attempts=3, base_delay=1.0, max_delay=30.0):\n    def decorator(func):\n        @wraps(func)\n        async def wrapper(*args, **kwargs):\n            delay = base_delay\n            for attempt in range(max_attempts):\n                try:\n                    return await func(*args, **kwargs)\n                except Exception as e:\n                    if attempt == max_attempts - 1:\n                        raise\n                    await asyncio.sleep(min(delay, max_delay))\n                    delay *= 2\n        return wrapper\n    return decorator\n```\nUsed by Workers 8-14 for LLM API calls.", "tags": ["ai", "python", "code_snippet", "retry", "async"], "project": "/app", "source": "worker-11", "quality_score": 0.88, "tier": "active", "created_at": "2026-01-02T16:42:09Z", "usefulness_score": 0.85, "retrieval_count": 29}
{"id": "mem_017_bug_memory_duplicate", "category": "bug_fix", "content": "Duplicate Memories in RAG Brain: Scribe was storing near-identical memories for similar tasks. Root cause: No deduplication before storing. Fix: 1) Compute embedding of new memory, 2) Query existing memories with cosine similarity > 0.95, 3) If match found, merge by appending new context to existing memory, 4) Update retrieval_count. Reduced memory bloat by 40%. Implemented in scribe/agent.py:extract_memories().", "tags": ["bug_fix", "rag", "memory", "deduplication", "scribe"], "project": "/app", "source": "scribe", "quality_score": 0.87, "tier": "active", "created_at": "2026-01-03T21:18:45Z", "usefulness_score": 0.90, "retrieval_count": 18}
{"id": "mem_018_pattern_testing_ai", "category": "pattern", "content": "Testing Pattern for AI/LLM Components: Reliable testing despite non-deterministic outputs. Pattern: 1) Mock LLM responses for unit tests, 2) Use schema validation instead of exact string matching, 3) Create 'golden' test cases with known-good outputs for regression, 4) Integration tests with real LLM but tolerance for variation, 5) Track output distributions over time for drift detection. Worker-14 implements tests using this pattern.", "tags": ["ai", "testing", "pattern", "llm", "quality"], "project": "/app", "source": "scribe", "quality_score": 0.89, "tier": "active", "created_at": "2026-01-04T12:55:33Z", "usefulness_score": 0.86, "retrieval_count": 21}
{"id": "mem_019_insight_domain_routing", "category": "insight", "content": "Insight: Domain Routing Accuracy. Queen's domain classification is 94% accurate based on 200 task analysis. Misclassifications occur when: 1) Task mentions multiple technologies (e.g., 'React app with ML predictions'), 2) Task is pure infrastructure (doesn't fit web/ai/quant), 3) Task is documentation-only. Recommendation: Add 'infrastructure' and 'documentation' as pseudo-domains, or allow multi-domain tasks with coordinated orchestrators.", "tags": ["insight", "routing", "queen", "domain", "classification"], "project": "/app", "source": "scribe", "quality_score": 0.88, "tier": "active", "created_at": "2026-01-03T14:08:17Z", "usefulness_score": 0.84, "retrieval_count": 12}
{"id": "mem_020_outcome_trading_bot", "category": "outcome", "content": "Task Outcome: 'Create paper trading bot with backtesting'. Domain: quant. Workers 15-21 executed. Total duration: 78.3s. Quality score: 0.88. Deliverables: DataFeed class, SignalGenerator, PositionSizer, OrderExecutor (dry_run only), PortfolioTracker, Backtester, Config/types. 1 conflict: Worker-17 and Worker-18 had overlapping risk logic - Warden merged with clearer separation. 3 friction reports: all SCOPE_TOO_BIG. Recommendation: Quant tasks need more granular slicing.", "tags": ["quant", "trading", "backtesting", "outcome"], "project": "/app", "source": "scribe", "quality_score": 0.83, "tier": "active", "created_at": "2026-01-04T16:42:55Z", "usefulness_score": 0.77, "retrieval_count": 6}
